<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
        <script src="https://unpkg.com/microcms-js-sdk@latest/dist/umd/microcms-js-sdk.js"></script> <!-- microCMS-SDKのCDN -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hooper@0.2.1/dist/hooper.css">
        <script src="https://cdn.jsdelivr.net/npm/hooper@0.2.1/dist/hooper.min.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
        <link rel="stylesheet" href="style.css" />
        <title>Document</title>
    </head>
    <body>
        <header class="header">
            <div class="inner wrapper">
                <h1 class="title">ANAI</h1>
                <nav>
                    <ul>
                        <li><a href="#news-anchor">NEWS</a></li>
                        <li><a href="#sample-anchor">SAMPLE</a></li>
                        <li><a href="#business">BUSINESS</a></li>
                        <li><a href="#company">COMPANY</a></li>
                    </ul>
                </nav>
            </div>
            <a class="contact" href="#">お問い合わせ</a>
        </header>

        <main id="app">
            <div class="mainvisual">
                <hooper :auto-play="true" :infinite-scroll="true" :play-speed="7000" :transition="4000" :hover-pause="false" :wheel-control="false">
                    <slide>
                        <img src="Google.jpg" alt="" />
                    </slide>
                    <slide>
                        <img src="Microsoft.jpg" alt="">
                    </slide>
                    <slide>
                        <img src="Yahoo.jpg" alt="">
                    </slide>
                </hooper>
            </div>

            <section id="news-anchor" class="news wrapper">
                <h2 class="section-title">
                    <span class="en">NEWS</span>
                    <span class="ja">ニュース</span>
                </h2>

                <ul class="list">
                    <li v-for="item in news">
                        <div class="date-area">
                            <time datetime="2021-01-01">{{item.publishedAt.substr(0,10)}}</time>
                            <span>{{item.category.name}}</span>
                        </div>
                        <p>{{item.title}}</p>
                    </li>
                    <!-- <li>
                        <div class="date-area">
                            <time datetime="2021-01-01">2021.01.01</time>
                            <span>NEWS</span>
                        </div>
                        <p>タイトルタイトルタイトルタイトル</p>
                    </li>
                    <li>
                        <div class="date-area">
                            <time datetime="2021-01-01">2021.01.01</time>
                            <span>PRESS</span>
                        </div>
                        <p>タイトルタイトルタイトルタイトル</p>
                    </li>
                    <li>
                        <div class="date-area">
                            <time datetime="2021-01-01">2021.01.01</time>
                            <span>NEWS</span>
                        </div>
                        <p>タイトルタイトルタイトルタイトル</p>
                    </li> -->
                </ul>
            </section>
            <section id="sample-anchor" class="sample wrapper">
                <h2 class="section-title">
                    <span class="en">sample</span>
                    <span class="ja">サンプル</span>
                </h2>
                <div class="sample-inner">
                    <div v-if="flag" class="change-btns">
                        <button v-for="(item, index) in contentsList" @click="changeFunc(index+1)" class="change-btn">{{item.name}}</button>
                        <!-- <button @click="changeFunc(1)">カウント</button>
                        <button @click="changeFunc(2)">フルーツ</button>
                        <button @click="changeFunc(3)">けいさん</button> -->
                        </div>
                    <div v-else>
                        <button v-model="flag" @click="changeFunc(0)" class="reverse-btn">戻る</button>
                    </div>
                    <div v-if="contentsList[0].contentsFlag" class="sample-inner inner">
                        <my-component v-for="i in 3"></my-component>
                    </div>
                    <div v-if="contentsList[1].contentsFlag" class="sample-inner inner">
                        <fruits-data v-for="item in fruitsList" :name1="item.name" :name2="item.price"></fruits-data>
                    </div>
                    <div v-if="contentsList[2].contentsFlag" class="sample-inner inner">
                        <calc-component></calc-component>
                    </div>
                </div>
            </section>
        </main>
        <script>
            const client = microcms.createClient({
                serviceDomain: "x4alakbnzu", 
                // 開設時に設定したドメイン名を設定する
                // https://x4alakbnzu.microcms.io/apis/news/jezmduqkxwy9 ⇒ microcmsの左側の文字列
                apiKey: '7AhijRlZpGfzL4FEojkcnx8WCkp9b9H74N1Z',
                // APIキーを設定する
                // 左側メニュー内、権限管理の「1個のAPIキー」からコピー
            })
            let MyComponent = {
                template: '<p class="my-comp">カウンター　<button @click="addOne">追加</button> <button @click="subOne">減少</button> <button @click="addTen">10追加</button> {{count}}</p>',
                data: function () {
                return {
                    count: 0
                }
                },
                methods: {
                    addOne: function() {
                        return this.count ++;
                    },
                    subOne: function() {
                        return this.count --;
                    },
                    addTen: function() {
                        return this.count += 10;
                    }
                },
            }
            let fruitsData = {
                template: '<p class="my-comp">商品名：{{name1}} 定価：{{name2}} 円 税込み価格：{{anai}} 円</p>',
                props: ['name1','name2'],
                // ↓↓ propsの変数名でアクセス!!(コンポーネント内の変数) dataにはアクセスしていない
                computed: {
                    anai: function() {
                        return Math.floor(this.name2 * 1.1)
                    }
                }
            }
            let calculator = {
                template: '<table class="my-comp">\
                    <tr><td colspan="3"><input type="text" class="calc-input" id="output" value="0" v-model="result"></td><td><button class="bbb" value="c" @click="calculate(\'c\')">C</button></td></tr>\
                    <tr v-for="row in items"><td v-for="column in row"><button class="calc-btn" v-on:click="calculate(column)">{{column}}</button></td></tr>\
                    </table>',
                data: function() {
                    return {
                        result:'0',
                        items:[
                            ['7','8','9','/'],
                            ['4','5','6','*'],
                            ['1','2','3','-'],
                            ['0','.','+','='],
                        ]
                    }
                },
                methods: {
                    calculate: function(cmd){
                        if(cmd == '='){
                            this.result = eval(this.result);
                        }else if(cmd == 'c'){
                            this.result = '0';
                        }else if(this.result == '0'){
                            this.result = cmd;
                        }else{
                            this.result += cmd;
                        }
                    }
                }
            }
            new Vue({
                el: '#app',
                components: {
                    'my-component': MyComponent,
                    'fruits-data': fruitsData,
                    'calc-component': calculator,
                    Hooper: window.Hooper.Hooper,
                    Slide: window.Hooper.Slide
                },
                data: {
                    news: [],
                    fruitsList: [
                        {name: 'りんご', price: 120},
                        {name: 'みかん', price: 100},
                        {name: 'もも', price: 180},
                        {name: 'バナナ', price: 150},
                        {name: 'いちご', price: 250},
                    ],
                    contentsList: [
                        {name: 'カウント', contentsFlag: false},
                        {name: 'フルーツ', contentsFlag: false},
                        {name: 'けいさん', contentsFlag: false}
                    ],
                    // countComp: false,
                    // fruitsComp: false,
                    // calcComp: false,
                    flag: true,
                },
                mounted() {
                    this.fetchNews();
                },
                methods: {
                    // microCMSに登録したニュース一覧を取得する処理
                    fetchNews: function () {
                        client
                            .get({
                                endpoint: 'news',
                            })
                            .then((res) => this.news = res.contents);
                    },
                    changeFunc: function(value) {
                        this.flag = false;
                        switch (value) {
                            case 1:
                                this.contentsList[0].contentsFlag = true;
                                break;
                            case 2:
                                this.contentsList[1].contentsFlag = true;
                                break;
                            case 3:
                                this.contentsList[2].contentsFlag = true;
                                break;
                            case 0:
                                this.flag = true;
                                this.contentsList[0].contentsFlag = false;
                                this.contentsList[1].contentsFlag = false;
                                this.contentsList[2].contentsFlag = false;
                        }
                    }
                }
            })
        </script>
        <style>
            .my-comp {
                width: 400px;
                background-color: #ffffe0;
                border: solid;
                border-color: darkorange;
                border-radius: 8px;
                padding: 8px;
            }
            
        </style>
    </body>
</html>
